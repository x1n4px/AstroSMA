{"ast":null,"code":"var _jsxFileName = \"/home/in4p/git/AstroUMA/Frontend/src/components/chart/BushableScatterplot.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BrushableScatterplot = ({\n  data,\n  width = 600,\n  height = 400\n}) => {\n  _s();\n  const svgRef = useRef(null);\n  const [selectedPoints, setSelectedPoints] = useState(data);\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n    const svg = d3.select(svgRef.current).attr('width', width).attr('height', height).style('overflow', 'visible');\n    svg.selectAll('*').remove(); // Limpiar el SVG\n\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    const x = d3.scaleLinear().domain(d3.extent(data, d => d.x)).range([0, innerWidth]);\n    const y = d3.scaleLinear().domain(d3.extent(data, d => d.y)).range([innerHeight, 0]);\n    const g = svg.append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n    g.append('g').attr('transform', `translate(0,${innerHeight})`).call(d3.axisBottom(x));\n    g.append('g').call(d3.axisLeft(y));\n    const dots = g.selectAll('circle').data(data).enter().append('circle').attr('cx', d => x(d.x)).attr('cy', d => y(d.y)).attr('r', 5).attr('fill', 'steelblue');\n    const brush = d3.brush().extent([[0, 0], [innerWidth, innerHeight]]).on('end', brushed);\n    g.append('g').attr('class', 'brush').call(brush);\n    function brushed({\n      selection\n    }) {\n      if (selection) {\n        const [[x0, y0], [x1, y1]] = selection;\n        const selected = data.filter(d => x0 <= x(d.x) && x(d.x) <= x1 && y0 <= y(d.y) && y(d.y) <= y1);\n        setSelectedPoints(selected);\n        dots.attr('fill', d => selected.includes(d) ? 'red' : 'steelblue');\n      } else {\n        setSelectedPoints(data);\n        dots.attr('fill', 'steelblue');\n      }\n    }\n  }, [data, width, height]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(BrushableScatterplot, \"XQFw0XUWd2laxDJ0Na2sbLe5oGE=\");\n_c = BrushableScatterplot;\nexport default BrushableScatterplot;\nvar _c;\n$RefreshReg$(_c, \"BrushableScatterplot\");","map":{"version":3,"names":["React","useRef","useEffect","useState","d3","jsxDEV","_jsxDEV","BrushableScatterplot","data","width","height","_s","svgRef","selectedPoints","setSelectedPoints","length","svg","select","current","attr","style","selectAll","remove","margin","top","right","bottom","left","innerWidth","innerHeight","x","scaleLinear","domain","extent","d","range","y","g","append","call","axisBottom","axisLeft","dots","enter","brush","on","brushed","selection","x0","y0","x1","y1","selected","filter","includes","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/in4p/git/AstroUMA/Frontend/src/components/chart/BushableScatterplot.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport * as d3 from 'd3';\n\nconst BrushableScatterplot = ({ data, width = 600, height = 400 }) => {\n  const svgRef = useRef(null);\n  const [selectedPoints, setSelectedPoints] = useState(data);\n\n  \n\n  useEffect(() => {\n    if (!data || data.length === 0) return;\n\n    const svg = d3.select(svgRef.current)\n      .attr('width', width)\n      .attr('height', height)\n      .style('overflow', 'visible');\n\n    svg.selectAll('*').remove(); // Limpiar el SVG\n\n    const margin = { top: 20, right: 20, bottom: 30, left: 40 };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n    const x = d3.scaleLinear()\n      .domain(d3.extent(data, d => d.x))\n      .range([0, innerWidth]);\n\n    const y = d3.scaleLinear()\n      .domain(d3.extent(data, d => d.y))\n      .range([innerHeight, 0]);\n\n    const g = svg.append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`);\n\n    g.append('g')\n      .attr('transform', `translate(0,${innerHeight})`)\n      .call(d3.axisBottom(x));\n\n    g.append('g')\n      .call(d3.axisLeft(y));\n\n    const dots = g.selectAll('circle')\n      .data(data)\n      .enter()\n      .append('circle')\n      .attr('cx', d => x(d.x))\n      .attr('cy', d => y(d.y))\n      .attr('r', 5)\n      .attr('fill', 'steelblue');\n\n    const brush = d3.brush()\n      .extent([[0, 0], [innerWidth, innerHeight]])\n      .on('end', brushed);\n\n    g.append('g')\n      .attr('class', 'brush')\n      .call(brush);\n\n    function brushed({ selection }) {\n      if (selection) {\n        const [[x0, y0], [x1, y1]] = selection;\n        const selected = data.filter(\n          d => x0 <= x(d.x) && x(d.x) <= x1 && y0 <= y(d.y) && y(d.y) <= y1\n        );\n        setSelectedPoints(selected);\n        dots.attr('fill', d => selected.includes(d) ? 'red' : 'steelblue');\n      } else {\n        setSelectedPoints(data);\n        dots.attr('fill', 'steelblue');\n      }\n    }\n  }, [data, width, height]);\n\n  return (\n    <div>\n      <svg ref={svgRef}></svg>\n      {/* <div>\n        <h3>Puntos seleccionados:</h3>\n        <pre>{JSON.stringify(selectedPoints, null, 2)}</pre>\n      </div> */}\n    </div>\n  );\n};\n\nexport default BrushableScatterplot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}